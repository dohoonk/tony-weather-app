<section class="weather-search">
  <%= render "weather/search_form" %>
</section>

<% if defined?(@stale) && @stale %>
  <aside class="stale-banner">
    Latest data may be out of date. Refresh queued.
  </aside>
<% end %>

<section class="weather-details">
  <h1>Weather in <%= @report.location %></h1>
  <% current = @report.current %>
  <div class="current-conditions">
    <p><strong>Condition:</strong> <%= current.condition %></p>
    <p><strong>Temperature:</strong> <%= current.formatted_temperature %></p>
    <% if current.formatted_high_low %>
      <p><strong>High / Low:</strong> <%= current.formatted_high_low %></p>
    <% end %>
    <p><strong>Observed:</strong> <%= current.formatted_observed_at %></p>
    <% if current.icon_url.present? %>
      <img src="https:<%= current.icon_url %>" alt="<%= current.condition %>">
    <% end %>
  </div>

  <% if @report.daily.any? %>
    <h2>Next <%= @report.daily.length %> Days</h2>
    <ul class="daily-forecast">
      <% @report.daily.each do |day| %>
        <li>
          <strong><%= day.formatted_date %>:</strong>
          <%= day.condition %> â€”
          <%= day.formatted_high_low %>
          <% if day.icon_url.present? %>
            <img src="https:<%= day.icon_url %>" alt="<%= day.condition %>">
          <% end %>
        </li>
      <% end %>
    </ul>
  <% end %>
</section>
